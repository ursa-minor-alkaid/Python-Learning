# 枚举类

时间：`2025年11月1日`

## 1. 介绍

- **枚举（Enumeration，简称Enum）** 是一种特殊的数据类型，它的值由一组固定的、唯一的常量组成。这些常量被称为枚举的成员（members）
  - 枚举的成员是唯一的实例（单例）；这意味着在你的整个程序运行期间，无论你在代码的哪个地方、无论你访问多少次 `Color.RED`，你得到的都是内存中同一个、唯一的对象。
- 目的：将一些字符串和数字归到一个“类”之下
- 这么做带来的优势：
  - 提高代码可读性和可维护性
  - 增强代码健壮性，防止错误（如，减少拼写错误）

---

## 2. 语法

### 基础语法

- 创建：
  - 创建一个继承自 `enum.Enum` 的类（需要导入模块）
  - 成员的语法：`枚举成员名称（name） = 值（value）`，名称通常用大写，这是常量的惯例
    - 值可以是 int，str
  - 示例：

      ```python
      from enum import Enum

      # 定义一个名为 Weekday 的枚举类
      class Weekday(Enum):
          MONDAY = 1
          TUESDAY = 2
          WEDNESDAY = 3
          THURSDAY = 4
          FRIDAY = 5
          SATURDAY = 6
          SUNDAY = 7
      ```

- 使用：
  - 访问成员：`变量名 = 类名.成员名`
  - 通过 name 或 value 获取成员
    - 通过 name (字符串) 查找: 使用字典风格的方括号 `[]`；`member = Color[color_name_str]`
    - 通过 value 查找: 使用函数调用风格的圆括号 `()`；`member = Color(color_value_int)`
  - 示例：

    ```python
    # 访问成员
    today = Weekday.WEDNESDAY
    print(today)  # 输出: Weekday.WEDNESDAY
    ```

### 成员的比较

- 枚举成员支持通过标识 (identity) 和相等性 (equality) 进行比较
  - 标识符比较：使用 `is`，比较的是对象的内存地址 (`id()`)
  - 相等性比较：使用 `==`，比较的是对象的值
- **成员的比较基于身份，而不是值**

    ```python
    today = Weekday.WEDNESDAY

    print(today == Weekday.WEDNESDAY, today == Weekday.MONDAY) 
    # 输出: True, False

    print(Weekday.WEDNESDAY == Weekday.WEDNESDAY, Weekday.WEDNESDAY is Weekday.WEDNESDAY)   
    # 输出: True, True

    print(Weekday.WEDNESDAY == 3, Weekday.WEDNESDAY is 3) 
    # 输出: False, False
    ```

- 枚举成员不是有序的：这意味着不能使用 `>`, `<`, `>=`, `<=` 进行比较

### 总结

- 在 Python 代码内部：应该始终使用枚举成员本身进行比较和逻辑判断。例如 `if status == OrderStatus.SHIPPED:`。这保证了代码的可读性和类型安全。
- 当你的Python代码需要和“外部”通信时：需要使用枚举成员的值（`.value`）；将程序内部的、类型安全的概念（枚举成员）转换成外部世界能理解的、通用的数据格式（如整数、字符串）

### 自动赋值：`auto()`

- 如果不关心成员的具体值是什么，只关心它们的唯一性，可以使用 `auto()` 来自动赋值。这在大多数情况下是推荐的做法
- 语法示例：

    ```python
    from enum import Enum, auto

    class OrderStatus(Enum):
        PENDING = auto()    # 值会自动从 1 开始递增
        PROCESSING = auto() # 值为 2
        SHIPPED = auto()    # 值为 3
        DELIVERED = auto()  # 值为 4

    print(OrderStatus.PENDING)        # 输出: OrderStatus.PENDING
    print(OrderStatus.PENDING.value)  # 输出: 1
    ```
